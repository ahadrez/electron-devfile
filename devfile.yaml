schemaVersion: 2.2.2
metadata:
  name: nodejs-electron-xvfb
components:
  - name: runtime
    container:
      image: quay.io/upstream/devspaces:electron
      args: ['tail','-f','/dev/null']
      memoryLimit: 2048Mi
      mountSources: true
      env:
        - name: DEBUG_PORT
          value: '5858'
        - name: ELECTRON_DISABLE_SANDBOX
          value: '1'
        - name: NO_AT_BRIDGE
          value: '1'
        - name: DISPLAY
          value: ':99'    # Xvfb display
      endpoints:
        - name: https-node
          targetPort: 3000
          protocol: https
        - exposure: none
          name: debug
          targetPort: 5858
